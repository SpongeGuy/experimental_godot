[gd_scene load_steps=14 format=3 uid="uid://6x2sla5rcri4"]

[ext_resource type="Script" uid="uid://c6ml72ebs0xce" path="res://entities/Entity.gd" id="1_he7up"]
[ext_resource type="Script" uid="uid://bghauax2lkx7o" path="res://entities/EntityIdentification.gd" id="2_8v4v5"]
[ext_resource type="Texture2D" uid="uid://dw2ampmx7uq0e" path="res://assets/sprites/debug/debug_plant.png" id="2_skysg"]
[ext_resource type="BehaviorTree" uid="uid://dypyatoxtwy56" path="res://ai/trees/fruit_plant.tres" id="3_st2s0"]
[ext_resource type="Script" uid="uid://uedw02l07pvv" path="res://entities/Hitbox.gd" id="4_xhkmh"]
[ext_resource type="Script" uid="uid://dxkak4by7qlk" path="res://entities/Hurtbox.gd" id="5_8v4v5"]
[ext_resource type="Script" uid="uid://cqo4fg81476qm" path="res://entities/DetectionArea.gd" id="6_hrua7"]

[sub_resource type="Resource" id="Resource_hrua7"]
script = ExtResource("2_8v4v5")
entity_class = "FruitTree"
entity_type = "FruitTree"
entity_faction = 2
metadata/_custom_type_script = "uid://bghauax2lkx7o"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4fnuo"]
size = Vector2(20, 7)

[sub_resource type="BlackboardPlan" id="BlackboardPlan_0er7p"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xhkmh"]
size = Vector2(32, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8v4v5"]
size = Vector2(5, 20)

[sub_resource type="CircleShape2D" id="CircleShape2D_xhkmh"]
radius = 58.00862

[node name="FruitTree" type="RigidBody2D" node_paths=PackedStringArray("physics_box", "bt_player", "graphical_module", "hitbox", "hurtbox", "detection_area")]
mass = 1000.0
script = ExtResource("1_he7up")
entity_identification_sheet = SubResource("Resource_hrua7")
physics_box = NodePath("CollisionShape2D")
bt_player = NodePath("BTPlayer")
graphical_module = NodePath("Graphical")
hitbox = NodePath("")
hurtbox = NodePath("")
detection_area = NodePath("")
metadata/_custom_type_script = "uid://c6ml72ebs0xce"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-1, 11)
shape = SubResource("RectangleShape2D_4fnuo")

[node name="Graphical" type="Node2D" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="Graphical"]
texture_filter = 1
texture = ExtResource("2_skysg")

[node name="BTPlayer" type="BTPlayer" parent="."]
behavior_tree = ExtResource("3_st2s0")
blackboard_plan = SubResource("BlackboardPlan_0er7p")

[node name="Node2D" type="Node2D" parent="."]

[node name="Hurtbox" type="Area2D" parent="Node2D" node_paths=PackedStringArray("master")]
collision_layer = 64
collision_mask = 32
script = ExtResource("5_8v4v5")
master = NodePath("../..")
metadata/_custom_type_script = "uid://dxkak4by7qlk"

[node name="Shape" type="CollisionShape2D" parent="Node2D/Hurtbox"]
position = Vector2(-1, 11)
shape = SubResource("RectangleShape2D_xhkmh")
disabled = true

[node name="Hitbox" type="Area2D" parent="Node2D" node_paths=PackedStringArray("master")]
script = ExtResource("4_xhkmh")
master = NodePath("../..")
metadata/_custom_type_script = "uid://uedw02l07pvv"

[node name="Shape" type="CollisionShape2D" parent="Node2D/Hitbox"]
position = Vector2(-1, 2)
shape = SubResource("RectangleShape2D_8v4v5")

[node name="DetectionArea" type="Area2D" parent="Node2D" node_paths=PackedStringArray("master")]
collision_mask = 20
script = ExtResource("6_hrua7")
master = NodePath("../..")
metadata/_custom_type_script = "uid://cqo4fg81476qm"

[node name="Shape" type="CollisionShape2D" parent="Node2D/DetectionArea"]
modulate = Color(16.704, 53.848, 62.491, 1)
position = Vector2(-1, 8)
shape = SubResource("CircleShape2D_xhkmh")
